package info.zznet.znms.web.module.screen.controller;

import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;

import info.zznet.znms.base.common.ZNMSLogger;
import info.zznet.znms.base.constants.PermissionConstants;
import info.zznet.znms.base.entity.FlowData;
import info.zznet.znms.web.WebRuntimeData;
import info.zznet.znms.web.annotation.CheckPermission;
import info.zznet.znms.web.module.screen.service.FlowDataService;
import info.zznet.znms.web.util.ApiClientUtil;
import info.zznet.znms.web.util.DateJsonValueProcessor;
import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import net.sf.json.JsonConfig;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping("/screen/module/flowAnalysis")
public class ScreenFlowAnalysisController {
	
	private WebRuntimeData webRuntimeData = WebRuntimeData.instance;
	
	@Autowired
	FlowDataService flowDataService;
	
 	@RequestMapping({"","/"})
    @CheckPermission(PermissionConstants.P_SCREEN_VIEW)
    public ModelAndView init(){
        ModelAndView mav = new ModelAndView("/screen/module/flowAnalysis/index");

        return mav;
    }
 	
 	
 	@RequestMapping(value = "/getFlowAnalysis", method = RequestMethod.POST, produces = {"application/json;charset=UTF-8"})
 	@ResponseBody
 	public String getFlowAnalysis(){
 		try {
 			
 			
			/*System.out.println(zlogJsonArray);
 			String zlogresponse="{\"wirelessFlowTrend\":{\"1481620620000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:17\",\"timestamp\":1481620620000},\"1481621940000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:39\",\"timestamp\":1481621940000},\"1481622660000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:51\",\"timestamp\":1481622660000},\"1481623200000\":{\"count\":0,\"fCount\":5.22,\"time\":\"2016-12-13 18:00\",\"timestamp\":1481623200000},\"1481620020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:07\",\"timestamp\":1481620020000},\"1481620800000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:20\",\"timestamp\":1481620800000},\"1481621340000\":{\"count\":0,\"fCount\":0.03,\"time\":\"2016-12-13 17:29\",\"timestamp\":1481621340000},\"1481622900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:55\",\"timestamp\":1481622900000},\"1481619900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:05\",\"timestamp\":1481619900000},\"1481622300000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:45\",\"timestamp\":1481622300000},\"1481621160000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:26\",\"timestamp\":1481621160000},\"1481622480000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:48\",\"timestamp\":1481622480000},\"1481623020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:57\",\"timestamp\":1481623020000},\"1481620440000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:14\",\"timestamp\":1481620440000},\"1481621760000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:36\",\"timestamp\":1481621760000},\"1481621280000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:28\",\"timestamp\":1481621280000},\"1481622720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:52\",\"timestamp\":1481622720000},\"1481621580000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:33\",\"timestamp\":1481621580000},\"1481622180000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:43\",\"timestamp\":1481622180000},\"1481622420000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:47\",\"timestamp\":1481622420000},\"1481622120000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:42\",\"timestamp\":1481622120000},\"1481621880000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:38\",\"timestamp\":1481621880000},\"1481622840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:54\",\"timestamp\":1481622840000},\"1481620500000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:15\",\"timestamp\":1481620500000},\"1481620200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:10\",\"timestamp\":1481620200000},\"1481622060000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:41\",\"timestamp\":1481622060000},\"1481622240000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:44\",\"timestamp\":1481622240000},\"1481622540000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:49\",\"timestamp\":1481622540000},\"1481619960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:06\",\"timestamp\":1481619960000},\"1481620920000\":{\"count\":0,\"fCount\":0.16,\"time\":\"2016-12-13 17:22\",\"timestamp\":1481620920000},\"1481622960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:56\",\"timestamp\":1481622960000},\"1481621640000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:34\",\"timestamp\":1481621640000},\"1481620320000\":{\"count\":0,\"fCount\":9.62,\"time\":\"2016-12-13 17:12\",\"timestamp\":1481620320000},\"1481622360000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:46\",\"timestamp\":1481622360000},\"1481620080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:08\",\"timestamp\":1481620080000},\"1481621040000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:24\",\"timestamp\":1481621040000},\"1481622600000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:50\",\"timestamp\":1481622600000},\"1481620740000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:19\",\"timestamp\":1481620740000},\"1481622780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:53\",\"timestamp\":1481622780000},\"1481621460000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:31\",\"timestamp\":1481621460000},\"1481620140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:09\",\"timestamp\":1481620140000},\"1481622000000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:40\",\"timestamp\":1481622000000},\"1481623320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:02\",\"timestamp\":1481623320000},\"1481619720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:02\",\"timestamp\":1481619720000},\"1481621700000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:35\",\"timestamp\":1481621700000},\"1481620860000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:21\",\"timestamp\":1481620860000},\"1481623140000\":{\"count\":0,\"fCount\":1.89,\"time\":\"2016-12-13 17:59\",\"timestamp\":1481623140000},\"1481621400000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:30\",\"timestamp\":1481621400000},\"1481620260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:11\",\"timestamp\":1481620260000},\"1481621100000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:25\",\"timestamp\":1481621100000},\"1481620560000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:16\",\"timestamp\":1481620560000},\"1481619840000\":{\"count\":0,\"fCount\":6.05,\"time\":\"2016-12-13 17:04\",\"timestamp\":1481619840000},\"1481619780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:03\",\"timestamp\":1481619780000},\"1481621820000\":{\"count\":0,\"fCount\":0.03,\"time\":\"2016-12-13 17:37\",\"timestamp\":1481621820000},\"1481620980000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:23\",\"timestamp\":1481620980000},\"1481621520000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:32\",\"timestamp\":1481621520000},\"1481623260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:01\",\"timestamp\":1481623260000},\"1481623080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:58\",\"timestamp\":1481623080000},\"1481620380000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:13\",\"timestamp\":1481620380000},\"1481620680000\":{\"count\":0,\"fCount\":0.09,\"time\":\"2016-12-13 17:18\",\"timestamp\":1481620680000},\"1481621220000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:27\",\"timestamp\":1481621220000}},\"pcFlowTrend\":{\"1481620620000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:17\",\"timestamp\":1481620620000},\"1481621940000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:39\",\"timestamp\":1481621940000},\"1481622660000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:51\",\"timestamp\":1481622660000},\"1481623200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:00\",\"timestamp\":1481623200000},\"1481620020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:07\",\"timestamp\":1481620020000},\"1481620800000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:20\",\"timestamp\":1481620800000},\"1481621340000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:29\",\"timestamp\":1481621340000},\"1481622900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:55\",\"timestamp\":1481622900000},\"1481619900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:05\",\"timestamp\":1481619900000},\"1481622300000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:45\",\"timestamp\":1481622300000},\"1481621160000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:26\",\"timestamp\":1481621160000},\"1481622480000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:48\",\"timestamp\":1481622480000},\"1481623020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:57\",\"timestamp\":1481623020000},\"1481620440000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:14\",\"timestamp\":1481620440000},\"1481621760000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:36\",\"timestamp\":1481621760000},\"1481621280000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:28\",\"timestamp\":1481621280000},\"1481622720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:52\",\"timestamp\":1481622720000},\"1481621580000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:33\",\"timestamp\":1481621580000},\"1481622180000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:43\",\"timestamp\":1481622180000},\"1481622420000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:47\",\"timestamp\":1481622420000},\"1481622120000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:42\",\"timestamp\":1481622120000},\"1481621880000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:38\",\"timestamp\":1481621880000},\"1481622840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:54\",\"timestamp\":1481622840000},\"1481620500000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:15\",\"timestamp\":1481620500000},\"1481620200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:10\",\"timestamp\":1481620200000},\"1481622060000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:41\",\"timestamp\":1481622060000},\"1481622240000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:44\",\"timestamp\":1481622240000},\"1481622540000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:49\",\"timestamp\":1481622540000},\"1481619960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:06\",\"timestamp\":1481619960000},\"1481620920000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:22\",\"timestamp\":1481620920000},\"1481622960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:56\",\"timestamp\":1481622960000},\"1481621640000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:34\",\"timestamp\":1481621640000},\"1481620320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:12\",\"timestamp\":1481620320000},\"1481622360000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:46\",\"timestamp\":1481622360000},\"1481620080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:08\",\"timestamp\":1481620080000},\"1481621040000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:24\",\"timestamp\":1481621040000},\"1481622600000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:50\",\"timestamp\":1481622600000},\"1481620740000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:19\",\"timestamp\":1481620740000},\"1481622780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:53\",\"timestamp\":1481622780000},\"1481621460000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:31\",\"timestamp\":1481621460000},\"1481620140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:09\",\"timestamp\":1481620140000},\"1481622000000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:40\",\"timestamp\":1481622000000},\"1481623320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:02\",\"timestamp\":1481623320000},\"1481619720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:02\",\"timestamp\":1481619720000},\"1481621700000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:35\",\"timestamp\":1481621700000},\"1481620860000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:21\",\"timestamp\":1481620860000},\"1481623140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:59\",\"timestamp\":1481623140000},\"1481621400000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:30\",\"timestamp\":1481621400000},\"1481620260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:11\",\"timestamp\":1481620260000},\"1481621100000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:25\",\"timestamp\":1481621100000},\"1481620560000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:16\",\"timestamp\":1481620560000},\"1481619840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:04\",\"timestamp\":1481619840000},\"1481619780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:03\",\"timestamp\":1481619780000},\"1481621820000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:37\",\"timestamp\":1481621820000},\"1481620980000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:23\",\"timestamp\":1481620980000},\"1481621520000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:32\",\"timestamp\":1481621520000},\"1481623260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:01\",\"timestamp\":1481623260000},\"1481623080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:58\",\"timestamp\":1481623080000},\"1481620380000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:13\",\"timestamp\":1481620380000},\"1481620680000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:18\",\"timestamp\":1481620680000},\"1481621220000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:27\",\"timestamp\":1481621220000}},\"terminalType\":{\"1\":0,\"-1\":23.13},\"userGroupCount\":{\"root\":23.13},\"studentWirelessFlowTrend\":{\"1481620620000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:17\",\"timestamp\":1481620620000},\"1481621940000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:39\",\"timestamp\":1481621940000},\"1481622660000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:51\",\"timestamp\":1481622660000},\"1481623200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:00\",\"timestamp\":1481623200000},\"1481620020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:07\",\"timestamp\":1481620020000},\"1481620800000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:20\",\"timestamp\":1481620800000},\"1481621340000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:29\",\"timestamp\":1481621340000},\"1481622900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:55\",\"timestamp\":1481622900000},\"1481619900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:05\",\"timestamp\":1481619900000},\"1481622300000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:45\",\"timestamp\":1481622300000},\"1481621160000\":{\"count\":0,\"fCount\":73,\"time\":\"2016-12-13 17:26\",\"timestamp\":1481621160000},\"1481622480000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:48\",\"timestamp\":1481622480000},\"1481623020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:57\",\"timestamp\":1481623020000},\"1481620440000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:14\",\"timestamp\":1481620440000},\"1481621760000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:36\",\"timestamp\":1481621760000},\"1481621280000\":{\"count\":0,\"fCount\":35,\"time\":\"2016-12-13 17:28\",\"timestamp\":1481621280000},\"1481622720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:52\",\"timestamp\":1481622720000},\"1481621580000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:33\",\"timestamp\":1481621580000},\"1481622180000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:43\",\"timestamp\":1481622180000},\"1481622420000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:47\",\"timestamp\":1481622420000},\"1481622120000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:42\",\"timestamp\":1481622120000},\"1481621880000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:38\",\"timestamp\":1481621880000},\"1481622840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:54\",\"timestamp\":1481622840000},\"1481620500000\":{\"count\":0,\"fCount\":55,\"time\":\"2016-12-13 17:15\",\"timestamp\":1481620500000},\"1481620200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:10\",\"timestamp\":1481620200000},\"1481622060000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:41\",\"timestamp\":1481622060000},\"1481622240000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:44\",\"timestamp\":1481622240000},\"1481622540000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:49\",\"timestamp\":1481622540000},\"1481619960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:06\",\"timestamp\":1481619960000},\"1481620920000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:22\",\"timestamp\":1481620920000},\"1481622960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:56\",\"timestamp\":1481622960000},\"1481621640000\":{\"count\":0,\"fCount\":46,\"time\":\"2016-12-13 17:34\",\"timestamp\":1481621640000},\"1481620320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:12\",\"timestamp\":1481620320000},\"1481622360000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:46\",\"timestamp\":1481622360000},\"1481620080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:08\",\"timestamp\":1481620080000},\"1481621040000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:24\",\"timestamp\":1481621040000},\"1481622600000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:50\",\"timestamp\":1481622600000},\"1481620740000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:19\",\"timestamp\":1481620740000},\"1481622780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:53\",\"timestamp\":1481622780000},\"1481621460000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:31\",\"timestamp\":1481621460000},\"1481620140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:09\",\"timestamp\":1481620140000},\"1481622000000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:40\",\"timestamp\":1481622000000},\"1481623320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:02\",\"timestamp\":1481623320000},\"1481619720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:02\",\"timestamp\":1481619720000},\"1481621700000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:35\",\"timestamp\":1481621700000},\"1481620860000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:21\",\"timestamp\":1481620860000},\"1481623140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:59\",\"timestamp\":1481623140000},\"1481621400000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:30\",\"timestamp\":1481621400000},\"1481620260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:11\",\"timestamp\":1481620260000},\"1481621100000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:25\",\"timestamp\":1481621100000},\"1481620560000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:16\",\"timestamp\":1481620560000},\"1481619840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:04\",\"timestamp\":1481619840000},\"1481619780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:03\",\"timestamp\":1481619780000},\"1481621820000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:37\",\"timestamp\":1481621820000},\"1481620980000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:23\",\"timestamp\":1481620980000},\"1481621520000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:32\",\"timestamp\":1481621520000},\"1481623260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:01\",\"timestamp\":1481623260000},\"1481623080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:58\",\"timestamp\":1481623080000},\"1481620380000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:13\",\"timestamp\":1481620380000},\"1481620680000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:18\",\"timestamp\":1481620680000},\"1481621220000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:27\",\"timestamp\":1481621220000}},\"studentPcFlowTrend\":{\"1481620620000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:17\",\"timestamp\":1481620620000},\"1481621940000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:39\",\"timestamp\":1481621940000},\"1481622660000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:51\",\"timestamp\":1481622660000},\"1481623200000\":{\"count\":0,\"fCount\":9.9,\"time\":\"2016-12-13 18:00\",\"timestamp\":1481623200000},\"1481620020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:07\",\"timestamp\":1481620020000},\"1481620800000\":{\"count\":0,\"fCount\":55,\"time\":\"2016-12-13 17:20\",\"timestamp\":1481620800000},\"1481621340000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:29\",\"timestamp\":1481621340000},\"1481622900000\":{\"count\":0,\"fCount\":21,\"time\":\"2016-12-13 17:55\",\"timestamp\":1481622900000},\"1481619900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:05\",\"timestamp\":1481619900000},\"1481622300000\":{\"count\":0,\"fCount\":11,\"time\":\"2016-12-13 17:45\",\"timestamp\":1481622300000},\"1481621160000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:26\",\"timestamp\":1481621160000},\"1481622480000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:48\",\"timestamp\":1481622480000},\"1481623020000\":{\"count\":0,\"fCount\":66,\"time\":\"2016-12-13 17:57\",\"timestamp\":1481623020000},\"1481620440000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:14\",\"timestamp\":1481620440000},\"1481621760000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:36\",\"timestamp\":1481621760000},\"1481621280000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:28\",\"timestamp\":1481621280000},\"1481622720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:52\",\"timestamp\":1481622720000},\"1481621580000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:33\",\"timestamp\":1481621580000},\"1481622180000\":{\"count\":0,\"fCount\":61,\"time\":\"2016-12-13 17:43\",\"timestamp\":1481622180000},\"1481622420000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:47\",\"timestamp\":1481622420000},\"1481622120000\":{\"count\":0,\"fCount\":75,\"time\":\"2016-12-13 17:42\",\"timestamp\":1481622120000},\"1481621880000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:38\",\"timestamp\":1481621880000},\"1481622840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:54\",\"timestamp\":1481622840000},\"1481620500000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:15\",\"timestamp\":1481620500000},\"1481620200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:10\",\"timestamp\":1481620200000},\"1481622060000\":{\"count\":0,\"fCount\":35,\"time\":\"2016-12-13 17:41\",\"timestamp\":1481622060000},\"1481622240000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:44\",\"timestamp\":1481622240000},\"1481622540000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:49\",\"timestamp\":1481622540000},\"1481619960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:06\",\"timestamp\":1481619960000},\"1481620920000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:22\",\"timestamp\":1481620920000},\"1481622960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:56\",\"timestamp\":1481622960000},\"1481621640000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:34\",\"timestamp\":1481621640000},\"1481620320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:12\",\"timestamp\":1481620320000},\"1481622360000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:46\",\"timestamp\":1481622360000},\"1481620080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:08\",\"timestamp\":1481620080000},\"1481621040000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:24\",\"timestamp\":1481621040000},\"1481622600000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:50\",\"timestamp\":1481622600000},\"1481620740000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:19\",\"timestamp\":1481620740000},\"1481622780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:53\",\"timestamp\":1481622780000},\"1481621460000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:31\",\"timestamp\":1481621460000},\"1481620140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:09\",\"timestamp\":1481620140000},\"1481622000000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:40\",\"timestamp\":1481622000000},\"1481623320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:02\",\"timestamp\":1481623320000},\"1481619720000\":{\"count\":0,\"fCount\":65,\"time\":\"2016-12-13 17:02\",\"timestamp\":1481619720000},\"1481621700000\":{\"count\":0,\"fCount\":35,\"time\":\"2016-12-13 17:35\",\"timestamp\":1481621700000},\"1481620860000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:21\",\"timestamp\":1481620860000},\"1481623140000\":{\"count\":0,\"fCount\":26,\"time\":\"2016-12-13 17:59\",\"timestamp\":1481623140000},\"1481621400000\":{\"count\":0,\"fCount\":44,\"time\":\"2016-12-13 17:30\",\"timestamp\":1481621400000},\"1481620260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:11\",\"timestamp\":1481620260000},\"1481621100000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:25\",\"timestamp\":1481621100000},\"1481620560000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:16\",\"timestamp\":1481620560000},\"1481619840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:04\",\"timestamp\":1481619840000},\"1481619780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:03\",\"timestamp\":1481619780000},\"1481621820000\":{\"count\":0,\"fCount\":32,\"time\":\"2016-12-13 17:37\",\"timestamp\":1481621820000},\"1481620980000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:23\",\"timestamp\":1481620980000},\"1481621520000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:32\",\"timestamp\":1481621520000},\"1481623260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:01\",\"timestamp\":1481623260000},\"1481623080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:58\",\"timestamp\":1481623080000},\"1481620380000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:13\",\"timestamp\":1481620380000},\"1481620680000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:18\",\"timestamp\":1481620680000},\"1481621220000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:27\",\"timestamp\":1481621220000}},\"teacherFlowTrend\":{\"1481620620000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:17\",\"timestamp\":1481620620000},\"1481621940000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:39\",\"timestamp\":1481621940000},\"1481622660000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:51\",\"timestamp\":1481622660000},\"1481623200000\":{\"count\":0,\"fCount\":5.22,\"time\":\"2016-12-13 18:00\",\"timestamp\":1481623200000},\"1481620020000\":{\"count\":0,\"fCount\":8.88,\"time\":\"2016-12-13 17:07\",\"timestamp\":1481620020000},\"1481620800000\":{\"count\":0,\"fCount\":55,\"time\":\"2016-12-13 17:20\",\"timestamp\":1481620800000},\"1481621340000\":{\"count\":0,\"fCount\":0.03,\"time\":\"2016-12-13 17:29\",\"timestamp\":1481621340000},\"1481622900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:55\",\"timestamp\":1481622900000},\"1481619900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:05\",\"timestamp\":1481619900000},\"1481622300000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:45\",\"timestamp\":1481622300000},\"1481621160000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:26\",\"timestamp\":1481621160000},\"1481622480000\":{\"count\":0,\"fCount\":61,\"time\":\"2016-12-13 17:48\",\"timestamp\":1481622480000},\"1481623020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:57\",\"timestamp\":1481623020000},\"1481620440000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:14\",\"timestamp\":1481620440000},\"1481621760000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:36\",\"timestamp\":1481621760000},\"1481621280000\":{\"count\":0,\"fCount\":32,\"time\":\"2016-12-13 17:28\",\"timestamp\":1481621280000},\"1481622720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:52\",\"timestamp\":1481622720000},\"1481621580000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:33\",\"timestamp\":1481621580000},\"1481622180000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:43\",\"timestamp\":1481622180000},\"1481622420000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:47\",\"timestamp\":1481622420000},\"1481622120000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:42\",\"timestamp\":1481622120000},\"1481621880000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:38\",\"timestamp\":1481621880000},\"1481622840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:54\",\"timestamp\":1481622840000},\"1481620500000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:15\",\"timestamp\":1481620500000},\"1481620200000\":{\"count\":0,\"fCount\":54,\"time\":\"2016-12-13 17:10\",\"timestamp\":1481620200000},\"1481622060000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:41\",\"timestamp\":1481622060000},\"1481622240000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:44\",\"timestamp\":1481622240000},\"1481622540000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:49\",\"timestamp\":1481622540000},\"1481619960000\":{\"count\":0,\"fCount\":28,\"time\":\"2016-12-13 17:06\",\"timestamp\":1481619960000},\"1481620920000\":{\"count\":0,\"fCount\":0.16,\"time\":\"2016-12-13 17:22\",\"timestamp\":1481620920000},\"1481622960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:56\",\"timestamp\":1481622960000},\"1481621640000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:34\",\"timestamp\":1481621640000},\"1481620320000\":{\"count\":0,\"fCount\":9.62,\"time\":\"2016-12-13 17:12\",\"timestamp\":1481620320000},\"1481622360000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:46\",\"timestamp\":1481622360000},\"1481620080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:08\",\"timestamp\":1481620080000},\"1481621040000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:24\",\"timestamp\":1481621040000},\"1481622600000\":{\"count\":0,\"fCount\":36.6,\"time\":\"2016-12-13 17:50\",\"timestamp\":1481622600000},\"1481620740000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:19\",\"timestamp\":1481620740000},\"1481622780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:53\",\"timestamp\":1481622780000},\"1481621460000\":{\"count\":0,\"fCount\":66.3,\"time\":\"2016-12-13 17:31\",\"timestamp\":1481621460000},\"1481620140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:09\",\"timestamp\":1481620140000},\"1481622000000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:40\",\"timestamp\":1481622000000},\"1481623320000\":{\"count\":0,\"fCount\":52.1,\"time\":\"2016-12-13 18:02\",\"timestamp\":1481623320000},\"1481619720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:02\",\"timestamp\":1481619720000},\"1481621700000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:35\",\"timestamp\":1481621700000},\"1481620860000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:21\",\"timestamp\":1481620860000},\"1481623140000\":{\"count\":0,\"fCount\":1.89,\"time\":\"2016-12-13 17:59\",\"timestamp\":1481623140000},\"1481621400000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:30\",\"timestamp\":1481621400000},\"1481620260000\":{\"count\":0,\"fCount\":7.6,\"time\":\"2016-12-13 17:11\",\"timestamp\":1481620260000},\"1481621100000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:25\",\"timestamp\":1481621100000},\"1481620560000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:16\",\"timestamp\":1481620560000},\"1481619840000\":{\"count\":0,\"fCount\":6.05,\"time\":\"2016-12-13 17:04\",\"timestamp\":1481619840000},\"1481619780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:03\",\"timestamp\":1481619780000},\"1481621820000\":{\"count\":0,\"fCount\":0.03,\"time\":\"2016-12-13 17:37\",\"timestamp\":1481621820000},\"1481620980000\":{\"count\":0,\"fCount\":8.9,\"time\":\"2016-12-13 17:23\",\"timestamp\":1481620980000},\"1481621520000\":{\"count\":0,\"fCount\":0.01,\"time\":\"2016-12-13 17:32\",\"timestamp\":1481621520000},\"1481623260000\":{\"count\":0,\"fCount\":2.6,\"time\":\"2016-12-13 18:01\",\"timestamp\":1481623260000},\"1481623080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:58\",\"timestamp\":1481623080000},\"1481620380000\":{\"count\":0,\"fCount\":25,\"time\":\"2016-12-13 17:13\",\"timestamp\":1481620380000},\"1481620680000\":{\"count\":0,\"fCount\":0.09,\"time\":\"2016-12-13 17:18\",\"timestamp\":1481620680000},\"1481621220000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:27\",\"timestamp\":1481621220000}},\"teacherPcFlowTrend\":{\"1481620620000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:17\",\"timestamp\":1481620620000},\"1481621940000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:39\",\"timestamp\":1481621940000},\"1481622660000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:51\",\"timestamp\":1481622660000},\"1481623200000\":{\"count\":0,\"fCount\":11,\"time\":\"2016-12-13 18:00\",\"timestamp\":1481623200000},\"1481620020000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:07\",\"timestamp\":1481620020000},\"1481620800000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:20\",\"timestamp\":1481620800000},\"1481621340000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:29\",\"timestamp\":1481621340000},\"1481622900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:55\",\"timestamp\":1481622900000},\"1481619900000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:05\",\"timestamp\":1481619900000},\"1481622300000\":{\"count\":0,\"fCount\":29,\"time\":\"2016-12-13 17:45\",\"timestamp\":1481622300000},\"1481621160000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:26\",\"timestamp\":1481621160000},\"1481622480000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:48\",\"timestamp\":1481622480000},\"1481623020000\":{\"count\":0,\"fCount\":30,\"time\":\"2016-12-13 17:57\",\"timestamp\":1481623020000},\"1481620440000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:14\",\"timestamp\":1481620440000},\"1481621760000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:36\",\"timestamp\":1481621760000},\"1481621280000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:28\",\"timestamp\":1481621280000},\"1481622720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:52\",\"timestamp\":1481622720000},\"1481621580000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:33\",\"timestamp\":1481621580000},\"1481622180000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:43\",\"timestamp\":1481622180000},\"1481622420000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:47\",\"timestamp\":1481622420000},\"1481622120000\":{\"count\":0,\"fCount\":33.3,\"time\":\"2016-12-13 17:42\",\"timestamp\":1481622120000},\"1481621880000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:38\",\"timestamp\":1481621880000},\"1481622840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:54\",\"timestamp\":1481622840000},\"1481620500000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:15\",\"timestamp\":1481620500000},\"1481620200000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:10\",\"timestamp\":1481620200000},\"1481622060000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:41\",\"timestamp\":1481622060000},\"1481622240000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:44\",\"timestamp\":1481622240000},\"1481622540000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:49\",\"timestamp\":1481622540000},\"1481619960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:06\",\"timestamp\":1481619960000},\"1481620920000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:22\",\"timestamp\":1481620920000},\"1481622960000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:56\",\"timestamp\":1481622960000},\"1481621640000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:34\",\"timestamp\":1481621640000},\"1481620320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:12\",\"timestamp\":1481620320000},\"1481622360000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:46\",\"timestamp\":1481622360000},\"1481620080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:08\",\"timestamp\":1481620080000},\"1481621040000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:24\",\"timestamp\":1481621040000},\"1481622600000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:50\",\"timestamp\":1481622600000},\"1481620740000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:19\",\"timestamp\":1481620740000},\"1481622780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:53\",\"timestamp\":1481622780000},\"1481621460000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:31\",\"timestamp\":1481621460000},\"1481620140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:09\",\"timestamp\":1481620140000},\"1481622000000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:40\",\"timestamp\":1481622000000},\"1481623320000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:02\",\"timestamp\":1481623320000},\"1481619720000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:02\",\"timestamp\":1481619720000},\"1481621700000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:35\",\"timestamp\":1481621700000},\"1481620860000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:21\",\"timestamp\":1481620860000},\"1481623140000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:59\",\"timestamp\":1481623140000},\"1481621400000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:30\",\"timestamp\":1481621400000},\"1481620260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:11\",\"timestamp\":1481620260000},\"1481621100000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:25\",\"timestamp\":1481621100000},\"1481620560000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:16\",\"timestamp\":1481620560000},\"1481619840000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:04\",\"timestamp\":1481619840000},\"1481619780000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:03\",\"timestamp\":1481619780000},\"1481621820000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:37\",\"timestamp\":1481621820000},\"1481620980000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:23\",\"timestamp\":1481620980000},\"1481621520000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:32\",\"timestamp\":1481621520000},\"1481623260000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 18:01\",\"timestamp\":1481623260000},\"1481623080000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:58\",\"timestamp\":1481623080000},\"1481620380000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:13\",\"timestamp\":1481620380000},\"1481620680000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:18\",\"timestamp\":1481620680000},\"1481621220000\":{\"count\":0,\"fCount\":0,\"time\":\"2016-12-13 17:27\",\"timestamp\":1481621220000}}}";
 			
 			//String zlogresponse=webRuntimeData.getFlowData();
 			JSONObject jsonObject=JSONObject.fromObject(zlogresponse);
			String studentWirelessFlowTrend=jsonObject.getString("studentWirelessFlowTrend");
			String studentPcFlowTrend=jsonObject.getString("studentPcFlowTrend");
			String teacherFlowTrend=jsonObject.getString("teacherFlowTrend");
			String teacherPcFlowTrend=jsonObject.getString("teacherPcFlowTrend");
			JSONObject studentWirelessFlowTrendJson=JSONObject.fromObject(studentWirelessFlowTrend);
			Iterator studentWirelessFlowIt=studentWirelessFlowTrendJson.keys();
			List<Map.Entry<String,String>> studentWirelessFlowList = null; 
			List timeAxisList=new ArrayList();
			Map<String,String> map=new TreeMap<String, String>();
			while(studentWirelessFlowIt.hasNext()){
				String key=(String)studentWirelessFlowIt.next();
				String value=studentWirelessFlowTrendJson.getString(key);
				JSONObject datas=JSONObject.fromObject(value);
				timeAxisList.add(datas.getString("time"));
				map.put(datas.getString("time"), datas.getString("fCount"));
			}
			Collections.sort(timeAxisList);
			studentWirelessFlowList = new ArrayList<Map.Entry<String,String>>(map.entrySet()); 
			Collections.sort(studentWirelessFlowList, new Comparator<Map.Entry<String,String>>(){ 
			public int compare(Map.Entry<String,String> mapping1,Map.Entry<String,String> mapping2){ 
			   return mapping1.getKey().compareTo(mapping2.getKey()); 
			  } 
			}); 
			
			JSONObject studentPcFlowTrendJson=JSONObject.fromObject(studentPcFlowTrend);
			Iterator studentPcFlowIt=studentPcFlowTrendJson.keys();
			List<Map.Entry<String,String>> studentPcFlowList = null; 
			Map<String,String> studentPcFlowMap=new TreeMap<String, String>();
			while(studentPcFlowIt.hasNext()){
				String key=(String)studentPcFlowIt.next();
				String value=studentPcFlowTrendJson.getString(key);
				JSONObject datas=JSONObject.fromObject(value);
				studentPcFlowMap.put(datas.getString("time"), datas.getString("fCount"));
			}
			studentPcFlowList = new ArrayList<Map.Entry<String,String>>(studentPcFlowMap.entrySet()); 
			Collections.sort(studentPcFlowList, new Comparator<Map.Entry<String,String>>(){ 
			public int compare(Map.Entry<String,String> mapping1,Map.Entry<String,String> mapping2){ 
			   return mapping1.getKey().compareTo(mapping2.getKey()); 
			  } 
			}); 
			
			JSONObject teacherFlowTrendJson=JSONObject.fromObject(teacherFlowTrend);
			Iterator teacherFlowIt=teacherFlowTrendJson.keys();
			List<Map.Entry<String,String>> teacherFlowList = null; 
			Map<String,String> teacherFlowTrendMap=new TreeMap<String, String>();
			while(teacherFlowIt.hasNext()){
				String key=(String)teacherFlowIt.next();
				String value=teacherFlowTrendJson.getString(key);
				JSONObject datas=JSONObject.fromObject(value);
				teacherFlowTrendMap.put(datas.getString("time"), datas.getString("fCount"));
			}
			teacherFlowList = new ArrayList<Map.Entry<String,String>>(teacherFlowTrendMap.entrySet()); 
			Collections.sort(teacherFlowList, new Comparator<Map.Entry<String,String>>(){ 
			public int compare(Map.Entry<String,String> mapping1,Map.Entry<String,String> mapping2){ 
			   return mapping1.getKey().compareTo(mapping2.getKey()); 
			  } 
			}); 
			
			JSONObject teacherPcFlowTrendJson=JSONObject.fromObject(teacherPcFlowTrend);
			Iterator teacherPcFlowIt=teacherPcFlowTrendJson.keys();
			List<Map.Entry<String,String>> teacherPcFlowList = null; 
			Map<String,String> teacherPcFlowMap=new TreeMap<String, String>();
			while(teacherPcFlowIt.hasNext()){
				String key=(String)teacherPcFlowIt.next();
				String value=teacherPcFlowTrendJson.getString(key);
				JSONObject datas=JSONObject.fromObject(value);
				teacherPcFlowMap.put(datas.getString("time"), datas.getString("fCount"));
			}
			teacherPcFlowList = new ArrayList<Map.Entry<String,String>>(teacherPcFlowMap.entrySet()); 
			Collections.sort(teacherPcFlowList, new Comparator<Map.Entry<String,String>>(){ 
			public int compare(Map.Entry<String,String> mapping1,Map.Entry<String,String> mapping2){ 
			   return mapping1.getKey().compareTo(mapping2.getKey()); 
			  } 
			}); 
			
			textMap.put("timeAxisList", timeAxisList);
			textMap.put("studentWirelessFlowTrend", studentWirelessFlowList);
			textMap.put("studentPcFlowTrend", studentPcFlowList);
			textMap.put("teacherFlowTrend", teacherFlowList);
			textMap.put("teacherPcFlowTrend", teacherPcFlowList);*/
			
			//**********************
			Map<String, Object> textMap = new HashMap<String, Object>();
			//String zlogFlowResponse="{\"onlineDetail\":{\"教师\":{\"etcOnlineTimePerDay\":0,\"etcOnlineTimePerRecord\":0,\"pcOnlineTimePerDay\":7.080268,\"pcOnlineTimePerRecord\":6.076185,\"wirelessOnlineTimePerDay\":23.575,\"wirelessOnlineTimePerRecord\":15.716666},\"学生\":{\"etcOnlineTimePerDay\":0,\"etcOnlineTimePerRecord\":0,\"pcOnlineTimePerDay\":7.080268,\"pcOnlineTimePerRecord\":6.076185,\"wirelessOnlineTimePerDay\":23.575,\"wirelessOnlineTimePerRecord\":15.716666}},\"flow\":{\"教师\":{\"etcFlowPerDay\":500,\"etcFlowPerRecord\":68.8,\"pcFlowPerDay\":300,\"pcFlowPerRecord\":50.2,\"wirelessFlowPerDay\":263,\"wirelessFlowPerRecord\":36.6},\"学生\":{\"etcFlowPerDay\":902.6,\"etcFlowPerRecord\":92.6,\"pcFlowPerDay\":352,\"pcFlowPerRecord\":68.9,\"wirelessFlowPerDay\":562.6,\"wirelessFlowPerRecord\":88.92}}}";
			String zlogFlowResponse=webRuntimeData.getScreenData();
			JSONObject flowResponse= JSONObject.fromObject(zlogFlowResponse);
 			JSONObject teacherFlow=JSONObject.fromObject(JSONObject.fromObject(flowResponse.getString("flow")).get("教师"));
 			JSONObject studentFlow=JSONObject.fromObject(JSONObject.fromObject(flowResponse.getString("flow")).get("学生"));
 			Map<String, Object> teacherFlowMap = new HashMap<String, Object>();
 			Map<String, Object> studentFlowMap = new HashMap<String, Object>();
 			if(flowResponse!=null&&!flowResponse.equals("null")){
 				teacherFlowMap.put("etcFlowPerDay", teacherFlow.getString("etcFlowPerDay"));
 				teacherFlowMap.put("etcFlowPerRecord", teacherFlow.getString("etcFlowPerRecord"));
 				teacherFlowMap.put("pcFlowPerDay", teacherFlow.getString("pcFlowPerDay"));
 				teacherFlowMap.put("pcFlowPerRecord", teacherFlow.getString("pcFlowPerRecord"));
 				teacherFlowMap.put("wirelessFlowPerDay", teacherFlow.getString("wirelessFlowPerDay"));
 				teacherFlowMap.put("wirelessFlowPerRecord", teacherFlow.getString("wirelessFlowPerRecord"));
 			}
 			if(studentFlow!=null&&!studentFlow.equals("null")){
 				studentFlowMap.put("etcFlowPerDay", studentFlow.getString("etcFlowPerDay"));
 				studentFlowMap.put("etcFlowPerRecord", studentFlow.getString("etcFlowPerRecord"));
 				studentFlowMap.put("pcFlowPerDay", studentFlow.getString("pcFlowPerDay"));
 				studentFlowMap.put("pcFlowPerRecord", studentFlow.getString("pcFlowPerRecord"));
 				studentFlowMap.put("wirelessFlowPerDay", studentFlow.getString("wirelessFlowPerDay"));
 				studentFlowMap.put("wirelessFlowPerRecord", studentFlow.getString("wirelessFlowPerRecord"));
 			}
 			
 			SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd");
 			List<FlowData>  flowDataList= flowDataService.findAll();
 			Collections.sort(flowDataList,new DateComparator());
 			List timeAxisList=new ArrayList();
 			List studentWirelessFlowList=new ArrayList();
 			List studentPcFlowList=new ArrayList();
 			List teacherFlowList=new ArrayList();
 			List teacherPcFlowList=new ArrayList();
 			
 			for (FlowData flowData : flowDataList) {
 				timeAxisList.add(sdf.format(flowData.getRecordDate()));
 				studentWirelessFlowList.add(flowData.getStudentWirelessFlow());
 				studentPcFlowList.add(flowData.getStudentPcFlow());
 				teacherFlowList.add(flowData.getTeacherWirelessFlow());
 				teacherPcFlowList.add(flowData.getTeacherPcFlow());
			}
			/*JsonConfig config = new JsonConfig();  
			config.registerJsonValueProcessor(Date.class, new DateJsonValueProcessor("yyyy-MM-dd"));  
			JSONArray dailyFlows=JSONArray.fromObject(flowDataList,config);*/
			
			textMap.put("timeAxisList", timeAxisList);
			textMap.put("studentWirelessFlowTrend", studentWirelessFlowList);
			textMap.put("studentPcFlowTrend", studentPcFlowList);
			textMap.put("teacherFlowTrend", teacherFlowList);
			textMap.put("teacherPcFlowTrend", teacherPcFlowList);
			
 			textMap.put("teacherFlow", teacherFlowMap);
 			textMap.put("studentFlow", studentFlowMap);
 			
			return JSONArray.fromObject(textMap).toString();
		} catch (Exception e) {
			ZNMSLogger.error("Failed to get data from zos,"+e.getMessage());
		}
 		return null;
 	}
 	
    static class DateComparator implements Comparator {  
        public int compare(Object object1, Object object2) {
        	FlowData flowData1 = (FlowData) object1;
        	FlowData flowData2 = (FlowData) object2;  
            return flowData1.getRecordDate().compareTo(flowData2.getRecordDate());  
        }  
    } 
}
